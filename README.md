yii2-json-behavior
=================

Поведение для автоматической конвертации формата JSON при работе с базой данных в фреймворке Yii-2.
В Yii 2.0.14+ конвертация осуществляется самим фреймворком. Использовать стоит с более ранними версиями фреймворка или когда поля для хранения JSON в БД имеют тип "text".
Используются события ActiveRecord для выполнения методов поведения до сохранения в БД и при получении данных.
  
  
  
Установка
------------------
* Установка пакета с помощью Composer.

```
composer require klisl/yii2-json-behavior
```



Использование
-------------

Разместить (переопределить метод behaviors) в классе наследуемом от ActiveRecord (модель/сущность)

```php
public function behaviors(): array
{
    return [
        [
            'class' => JsonBehavior::class,
            'property' => 'meta',
            'jsonField' => 'meta_json'
        ]
    ];
}
```

* property - указать свойство объекта которое необходимо преобразовать в формат JSON перед сохранением в БД;
* jsonField - указать название поля таблицы для хранения данных в формате JSON

Если свойство объекта имеет название идентичное полю в БД, атрибут 'jsonField' можно не указывать.


Мой блог: [klisl.com](https://klisl.com)  